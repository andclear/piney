我现在需要实现一个新的功能：图库

## 功能描述

该功能是将`图片`导入到系统中，本地存储，并且实现分类管理等功能。

## 功能入口

在侧边栏增加"图库"，放在 `全局世界书`的下面，`导入`的上面。图标使用lucide库中的`Images`

## 数据库

使用 SeaORM 的迁移脚本创建

新增`images`表。

字段：
- id (UUID)
- title：默认使用文件名
- category：分类
- tag：标签
- file_path：本地绝对路径
- thumbnail_path：缩略图的路径
- width：宽度(用于计算瀑布流的宽高比 Aspect Ratio)
- height：高度
- `file_size`：BIGINT，文件大小。
- `color_category`：VARCHAR(10)，仅存储标准色名。
- is_ai：boolean（是否是AI生图）
- ai_platform：生图平台，VARCHAR(20)（枚举值：`NovelAI`, `Midjourney`, `ComfyUI`, `StableDiffusion`,  `Other`
- path：存储路径（是否需要，不需要就算了）
- ai_prompt：正向提示词
- ai_negative_prompt（负向提示词，NAI的UC也在这里）
- is_authorized：boolean，是否获得使用许可（可选）
- user_notes：用户备注
- created_at：导入时间

### color_category

颜色筛选的实现方式：

#### 1. 数据库

color_category仅存储标准色名
#### 2. 9色方案

 这里是标准的 **9 色方案**（彩虹7色 + 黑白），附带了用于计算的建议色值：
 
```
const COLOR_PALETTE = {
  "red":    "#FF0000", // 红色
  "orange": "#FFA500", // 橙色
  "yellow": "#FFFF00", // 黄色
  "green":  "#008000", // 绿色
  "cyan":   "#00FFFF", // 青色 (对于二次元/AI图很重要)
  "blue":   "#0000FF", // 蓝色
  "purple": "#800080", // 紫色
  "black":  "#000000", // 黑色
  "white":  "#FFFFFF"  // 白色
  "gray":   "#808080", // 灰色
};
```

#### 3. 核心逻辑

如何把图片“归”入这 9 类？ (核心逻辑)——使用 **HSV (色相、饱和度、亮度)** 模型来判断。
 
第一步：全局强制判定（极暗处理）

无论图片是什么颜色（哪怕是深红色、深蓝色），只要它太暗，人眼看起来就是黑色。

- **规则：** 如果 **亮度 (V)** 低于 **15%**，直接归类为 **黑色 (Black)**。 
- _（流程结束）_

第二步：判断是否为“无彩色系”（黑白灰）

如果第一步没通过（即亮度足够），接下来判断它是否足够“鲜艳”。
- **判断标准：** 检查 **饱和度 (S)**。
- **规则：** 如果 **饱和度 (S)** 低于 **10%**（即几乎没有色彩倾向），则进入**黑白灰判定流程**：
    1. 如果 **亮度 (V)** 低于 **25%**：归类为 **黑色 (Black)**。    
    2. 如果 **亮度 (V)** 高于 **80%**：归类为 **白色 (White)**。   
    3. 如果 **亮度 (V)** 介于 **25% 到 80%** 之间：归类为 **灰色 (Gray)**。  
    - _（流程结束）_   

 第三步：判断“彩色系”的具体颜色

如果前两步都没通过（即亮度大于 15% 且 饱和度大于 10%），说明这是一张**彩色图片**。此时根据 **色相 (H)** 的角度值进行归类：
- **0° 至 15°**：归类为 **红色 (Red)**
- **16° 至 45°**：归类为 **橙色 (Orange)**
- **46° 至 70°**：归类为 **黄色 (Yellow)**
- **71° 至 165°**：归类为 **绿色 (Green)**
- **166° 至 200°**：归类为 **青色 (Cyan)** _（注：包含初音绿、天蓝、蒂芙尼蓝）_
- **201° 至 260°**：归类为 **蓝色 (Blue)**
- **261° 至 330°**：归类为 **紫色 (Purple)**
- **331° 至 360°**：归类为 **红色 (Red)** _（注：色环闭合回到红色）_

## 图库页面

功能上支持：
- 导入：在图库页面增加导入按钮（右上角），可以批量导入，也可以一张一张导入，单张导入的时候需要填写相关信息（标题、标签、分类、AI生图、已获许可、用户备注，如果是AI生图还需要填写生图平台、正向提示词、负向提示词。）用户也可以不填直接点完成，所有项都非必填项。导入的图片存储在/data/images/文件夹内。
- 瀑布流：移动端最少也要两数列（图片≥2的情况下）
- 分类：复用角色库页面（/character）的分类样式及逻辑
- 收藏：（收藏后自动创建一个"收藏"分类，排在最前（"全部"的后面，其他所有分类的前面））
- 颜色筛选：根据上方的内容进行实现
- 排序功能：收藏的永远在最前，其次则按照导入时间排序
- 右键选择功能（复刻角色库页面在角色卡上右键菜单的功能），功能包括多选后山粗话、导出（批量导出）、移动到分类、批量设置是否AI生图、批量设置是否获得许可
- 编辑功能，点击图片后通过dialog弹窗打开，电脑端左侧显示图片，右侧显示详细信息，pad端和移动端则是上方显示图片，下方显示详细信息。
- 详细信息包括：标题、标签、分类、AI生图（勾选）、已获许可（勾选）、用户备注
- 如果是AI生图，则额外显示生图平台、正向提示词、负向提示词（位置在在用户备注之上）

## 一些说明

1. 系统应具有能够检测图片中的正向提示词和负向提示词的能力，如果检测到了，则自动写入数据库中对应的位置；
2. 应支持导入的格式有：png、jpg、jpeg、webp、gif
3. 导入的图片，除了gif动图外，其他的图片都要自动转为webp格式（转换参数请查看角色卡缩略图是怎么定义的），webp格式的名称需要和原图保持一致，格式为`{原图名称}_thumbnail`。日常显示和查看的时候都使用webp的缩略图，以保持更快的访问速度，只有在导出的时候才导出为原图。
4. 导入的图片统一存储在 `/data/images`文件夹下。